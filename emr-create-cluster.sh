#!/bin/bash

aws emr create-cluster --auto-scaling-role EMR_AutoScaling_DefaultRole --applications Name=Hadoop Name=Hive Name=Pig Name=Hue Name=Spark Name=JupyterHub Name=Livy --bootstrap-actions '[{"Path":"s3://ccc1-emr-bootstrap/install-my-jupyter-libraries.sh","Name":"Custom action"}]' --ebs-root-volume-size 10 --ec2-attributes '{"KeyName":"uiuc","InstanceProfile":"EMR_EC2_DefaultRole","SubnetId":"subnet-48b6a003","EmrManagedSlaveSecurityGroup":"sg-0c56a89a284ffc16e","EmrManagedMasterSecurityGroup":"sg-0f7b0378220f8dd02"}' --service-role EMR_DefaultRole --enable-debugging --release-label emr-5.21.0 --log-uri 's3n://aws-logs-869754755663-us-east-1/elasticmapreduce/' --name 'ccc1-cluster' --instance-groups '[{"InstanceCount":1,"EbsConfiguration":{"EbsBlockDeviceConfigs":[{"VolumeSpecification":{"SizeInGB":32,"VolumeType":"gp2"},"VolumesPerInstance":1}],"EbsOptimized":true},"InstanceGroupType":"MASTER","InstanceType":"m5.xlarge","Name":"Master - 1"},{"InstanceCount":2,"EbsConfiguration":{"EbsBlockDeviceConfigs":[{"VolumeSpecification":{"SizeInGB":256,"VolumeType":"gp2"},"VolumesPerInstance":1}],"EbsOptimized":true},"InstanceGroupType":"CORE","InstanceType":"m5.2xlarge","Name":"Core - 2"}]' --scale-down-behavior TERMINATE_AT_TASK_COMPLETION --region us-east-1